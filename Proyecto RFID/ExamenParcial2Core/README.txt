Aquí va el core del proyecto